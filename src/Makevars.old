#MkInclude = $(R_HOME)/etc${R_ARCH}/Makeconf
CXX_STD = CXX11
##
## NEWMAT and MIXMOD
##
NEWMATDIR    = ./NEWMAT
MIXMODDIR    = ./mixmod

MIXMODLIB    = mixmod.a

PKG_CPPFLAGS = -I. -I./NEWMAT/

## Use the R_HOME indirection to support installations of multiple R version
PKG_LIBS = `$(R_HOME)/bin/Rscript -e "Rcpp:::LdFlags()"` -L$(MIXMODDIR) $(MIXMODLIB)

##
## Targets
##
.PHONY: all mixmod

all: $(SHLIB)
$(SHLIB): mixmod

mixmod:
	(cd $(NEWMATDIR) && $(MAKE) -f newmat_r.mk)
	(cd $(MIXMODDIR) && $(MAKE) -f mixmod_r.mk)
	$(RANLIB) $(MIXMODLIB)


